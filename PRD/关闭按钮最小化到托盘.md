# 关闭按钮最小化到托盘

## 背景

RoxyBrowser Manager 已支持系统托盘功能，但点击窗口关闭按钮（×）会彻底退出应用。对于常驻后台的管理工具，这不符合用户预期。

## 需求描述

- 点击窗口关闭按钮时，**隐藏窗口** 而非退出应用
- 应用继续在系统托盘中运行
- 用户通过以下方式恢复窗口：
  - 左键点击系统托盘图标
  - 右键托盘菜单 → "显示窗口"
- 仅通过 **托盘菜单 → "退出"** 才能真正关闭应用

## 技术方案

在 `src-tauri/src/lib.rs` 中添加 `on_window_event` 处理器：

```rust
.on_window_event(|window, event| {
    if let WindowEvent::CloseRequested { api, .. } = event {
        api.prevent_close();   // 阻止窗口销毁
        let _ = window.hide(); // 隐藏到托盘
    }
})
```

## 平台兼容性

| 平台 | 行为 |
|------|------|
| **Windows** | 窗口隐藏，托盘图标保留 |
| **macOS** | 窗口隐藏，托盘图标保留 |

Tauri v2 的 `WindowEvent` API 跨平台一致，无需平台判断。

## 验证要点

1. 关闭按钮点击后窗口消失，托盘图标仍在
2. 从托盘可恢复窗口
3. "退出"菜单可完全退出
4. 多次隐藏/恢复无异常
